<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>The Tidyverse</title>
    <meta charset="utf-8" />
    <meta name="author" content="Giora Simchoni" />
    <meta name="date" content="2021-03-05" />
    <script src="u1_d01-tidyverse_files/header-attrs-2.6/header-attrs.js"></script>
    <head>
      <link rel="icon" href="../DSApps_logo.jpg" type="image/jpg"> 
      <link rel="shortcut icon" href="../DSApps_logo.jpg" type="image/jpg">
    </head>
    <link rel="stylesheet" href="../slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: logo-slide

---

class: title-slide

## The Tidyverse

### Applications of Data Science - Class 1

### Giora Simchoni

#### `gsimchoni@gmail.com and add #dsapps in subject`

### Stat. and OR Department, TAU
### 2021-03-05

---



layout: true

&lt;div class="my-footer"&gt;
  &lt;span&gt;
    &lt;a href="https://dsapps-2021.github.io/Class_Slides/" target="_blank"&gt;Applications of Data Science
    &lt;/a&gt;
  &lt;/span&gt;
&lt;/div&gt;

---



class: section-slide

# I don't need to know about wrangling data, I get by.

---

# So, what's wrong with Excel?

(MS Excel is one amazing software. But it lacks:)

- Structure (or rather, structure is up to the user)
- Types to variables
- Automization (you could learn VBA Excel, but the horror)
- Reproducibility
- Open Source
- Extensibility
- Speed and Scale
- Modeling (there *is* a t-test, but the horror)

[MS Excel might be the most dangerous software on the planet](https://www.forbes.com/sites/timworstall/2013/02/13/microsofts-excel-might-be-the-most-dangerous-software-on-the-planet/#667084f5633d) (Tim Worstall, Forbes)

---

# So, what's wrong with base R?

(Base R is one amazing software. But it lacks:)

- Consistency:
  - Function names
  - Function arguments names
  - Function arguments order
  - Function return types (sometimes the same function!)
- Meaningful errors and warnings
- Good choices of default values to arguments
- Speed
- Good and easy visualizations
- One other thing

---

### (In) Consistency - Example 1: Strings

.font80percent[

```r
# split a string by pattern: strsplit(string, pattern)
strsplit("Who dis?", " ")
```

```
## [[1]]
## [1] "Who"  "dis?"
```


```r
# find if a pattern exists in a string: grepl(pattern, string)
grepl("di", "Who dis?")
```

```
## [1] TRUE
```


```r
# substitute a pattern in a string: sub(pattern, replace, string)
sub("di", "thi", "Who dis?")
```

```
## [1] "Who this?"
```


```r
# length of a string: nchar(string); length of object: length(obj)
c(nchar("Who dis?"), length("Who dis?"))
```

```
## [1] 8 1
```
]

---

### (In) Consistency - Example 2: Models


```r
n &lt;- 10000
x1 &lt;- runif(n)
x2 &lt;- runif(n)
t &lt;- 1 + 2 * x1 + 3 * x2
y &lt;- rbinom(n, 1, 1 / (1 + exp(-t)))
```


```r
glm(y ~ x1 + x2, family = "binomial")
```


```r
glmnet(as.matrix(cbind(x1, x2)), as.factor(y), family = "binomial")
```


```r
randomForest(as.factor(y) ~ x1 + x2)
```



```r
gbm(y ~ x1 + x2, data = data.frame(x1 = x1, x2 = x2, y = y))
```

ðŸ˜±

---

### (Un) Meaningful Errors - Example


```r
df &lt;- data.frame(Education = 1:5, Ethnicity = c(2, 4, 5, 2, 1))
table(df$Eduction, df$Ethnicity)
```

&lt;pre style="color: red;"&gt;&lt;code&gt;## Error in table(df$Eduction, df$Ethnicity): all arguments must have the same
length
&lt;/code&gt;&lt;/pre&gt;

---

### (Bad) Default Values - Example

![](images/bad_args_table.png)


```r
# In R 3.6... in R 4.0 this was fixed!
df &lt;- read.csv("../data/bad_args_test.csv")
df$col3
```


```
## [1] a b c d
## Levels: a b c d
```


```r
df &lt;- read.csv("../data/bad_args_test.csv", stringsAsFactors = FALSE)
df$col3
```

```
## [1] "a" "b" "c" "d"
```

---

### (No) Speed - Example


```r
file_path &lt;- "../data/mediocre_file.csv"
df &lt;- read.csv(file_path)
dim(df)
```

```
## [1] 9180   14
```


```r
library(microbenchmark)

microbenchmark(
  read_base = read.csv(file_path),
  read_tidy = read_csv(file_path, col_types = cols()),
  read_dt = data.table::fread(file_path),
  times = 10)
```

```
## Unit: milliseconds
##       expr     min      lq     mean   median      uq     max neval
##  read_base 46.2234 48.0299 49.09305 48.52205 49.7490 53.9711    10
##  read_tidy 26.8521 27.1299 32.28090 28.91365 29.1814 68.9376    10
##    read_dt  9.8389  9.9081 15.64060 10.07300 10.2568 65.5986    10
```

---
class: section-slide

# Detour: The OKCupid Dataset

---

## The OKCupid Dataset

- ~60K active OKCupid users scraped on June 2012
- 35K Male, 25K Female (less awareness for non-binary back then)
- Answers to questions like:
  - Body Type
  - Diet
  - Substance Abuse
  - Education
  - Do you like pets?
  - Open questions, e.g. "On a typical Friday night I am..."
  - And the more boring demographic details like age, height, location, sign, religion etc.
- See [here](https://github.com/rudeboybert/JSE_OkCupid/blob/master/okcupid_codebook.txt) for the full codebook

---
class: section-slide

# End of Detour

---

### (Not) Good Vizualizations - Example



.font80percent[

```r
okcupid &lt;- read_csv("~/okcupid.csv.zip", col_types = cols())
okcupid$income[okcupid$income == -1] &lt;- NA
okcupid$height_cm &lt;- okcupid$height * 2.54
```


```r
plot(okcupid$height_cm, log10(okcupid$income + 1),
     col = c("red", "green")[as.factor(okcupid$sex)])
```

&lt;img src="images/Viz-Base-1.png" width="40%" /&gt;
]

---


```r
ggplot(okcupid, aes(height_cm, log10(income + 1), color = sex)) +
  geom_point()
```

&lt;pre style="color: red;"&gt;&lt;code&gt;## Warning: Removed 48442 rows containing missing values (geom_point).
&lt;/code&gt;&lt;/pre&gt;&lt;img src="images/Viz-Tidy-1.png" width="50%" /&gt;

---

## One other thing

Manager: "Give me the average income of women respondents above age 30 grouped by sexual orientation!"

You:


```r
mean_bi &lt;- mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == "bisexual"], na.rm = TRUE)
mean_gay &lt;- mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == "gay"], na.rm = TRUE)
mean_straight &lt;- mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == "straight"], na.rm = TRUE)

data.frame(orientation = c("bisexual", "gay", "straight"),
           income_mean = c(mean_bi, mean_gay, mean_straight))
```

```
##   orientation income_mean
## 1    bisexual   133421.05
## 2         gay    86489.36
## 3    straight    85219.74
```

---

Or the slightly better you:


```r
mean_income_function &lt;- function(orientation) {
  mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == orientation], na.rm = TRUE)
}

mean_bi &lt;- mean_income_function("bisexual")
mean_gay &lt;- mean_income_function("gay")
mean_straight &lt;- mean_income_function("straight")

data.frame(orientation = c("bisexual", "gay", "straight"),
           income_mean = c(mean_bi, mean_gay, mean_straight))
```

```
##   orientation income_mean
## 1    bisexual   133421.05
## 2         gay    86489.36
## 3    straight    85219.74
```

---

Or the even better you:


```r
orientations &lt;- c("bisexual", "gay", "straight")
income_means &lt;- numeric(3)

for (i in seq_along(orientations)) {
  income_means[i] &lt;- mean_income_function(orientations[i])
}

data.frame(orientation = orientations, income_mean = income_means)
```

```
##   orientation income_mean
## 1    bisexual   133421.05
## 2         gay    86489.36
## 3    straight    85219.74
```

---

Or the best you:


```r
okcupid_females_over30 &lt;- with(okcupid, okcupid[sex == "f" &amp; age &gt; 30, ])
aggregate(okcupid_females_over30$income,
          by = list(orientation = okcupid_females_over30$orientation),
          FUN = mean, na.rm = TRUE)
```

```
##   orientation         x
## 1    bisexual 133421.05
## 2         gay  86489.36
## 3    straight  85219.74
```

&lt;br&gt;

Manager: "What? Why would bisexual women have a higher income than straight or gay women? Could you add the median, trimmed mean, standard error and n?"

You: ðŸ˜±

---
class: section-slide

# The Tidyverse

---

## What *is* The Tidyverse?

&gt; The [tidyverse](https://www.tidyverse.org/) is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.

- `tibble`: the `data.frame` re-imagined
- `readr`: importing/exporting (mostly rectangular) data for humans
- `dplyr` + `tidyr`: a grammar of data manipulation
- `purrr`: functional programming in R
- `stringr`: string manipulation
- `ggplot2`: a grammar of graphics

---

The above can all be installed and loaded under the `tidyverse` package:


```r
library(tidyverse)
```

Many more:
- `lubridate`: manipulating dates
- `tidymodels`: tidy modeling/statistics
- `rvest`: web scraping
- `tidytext`: tidy text analysis (life saver)
- `tidygraph` + `ggraph`: manipulating and plotting networks
- `glue`: print like a boss
- countless `gg` extensions (`ggmosaic`, `ggbeeswarm`, `gganimate`, `ggridges` etc.)

---

# What's so great about the Tidyverse?

- Tidy Data
- Consistentcy (in function names, args, return types, documentation)
- The Pipe
- Speed (C++ under the hood)
- `ggplot2`
- The Community

---

## Tidy Data

- Each variable must have its own column.
- Each observation must have its own row.
- Each value must have its own cell.

&lt;br&gt;

&lt;img src="images/tidy_data.png" style="width: 90%" /&gt;

---

### Which one of these datasets is tidy? (I)




```r
table1
```

```
## # A tibble: 315 x 4
##    religion      yob n_straight n_total
##    &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1 atheist      1950         26      29
##  2 buddhist     1950          6       6
##  3 christian    1950         28      32
##  4 hindu        1950          0       0
##  5 jewish       1950         21      24
##  6 muslim       1950          0       0
##  7 unspecified  1950         71      76
##  8 atheist      1951         31      33
##  9 buddhist     1951         11      11
## 10 christian    1951         23      24
## # ... with 305 more rows
```

---

### Which one of these datasets is tidy? (II)


```r
table2
```

```
## # A tibble: 630 x 4
##    religion    yob type         n
##    &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 atheist    1950 straight    26
##  2 atheist    1950 total       29
##  3 buddhist   1950 straight     6
##  4 buddhist   1950 total        6
##  5 christian  1950 straight    28
##  6 christian  1950 total       32
##  7 hindu      1950 straight     0
##  8 hindu      1950 total        0
##  9 jewish     1950 straight    21
## 10 jewish     1950 total       24
## # ... with 620 more rows
```

---

### Which one of these datasets is tidy? (III)


```r
table3
```

```
## # A tibble: 315 x 3
##    religion      yob pct_straight
##    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       
##  1 atheist      1950 26/29       
##  2 buddhist     1950 6/6         
##  3 christian    1950 28/32       
##  4 hindu        1950 0/0         
##  5 jewish       1950 21/24       
##  6 muslim       1950 0/0         
##  7 unspecified  1950 71/76       
##  8 atheist      1951 31/33       
##  9 buddhist     1951 11/11       
## 10 christian    1951 23/24       
## # ... with 305 more rows
```

---

### Which one of these datasets is tidy? (IV)


```r
table4
```

```
## # A tibble: 7 x 91
##   religion n_total_1950 n_total_1951 n_total_1952 n_total_1953 n_total_1954
##   &lt;chr&gt;           &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
## 1 atheist            29           33           34           37           40
## 2 buddhist            6           11           14           16           11
## 3 christi~           32           24           37           47           37
## 4 hindu               0            0            0            1            1
## 5 jewish             24           29           27           23           25
## 6 muslim              0            0            0            0            0
## 7 unspeci~           76           79           83           97           83
## # ... with 85 more variables: n_total_1955 &lt;dbl&gt;, n_total_1956 &lt;dbl&gt;,
## #   n_total_1957 &lt;dbl&gt;, n_total_1958 &lt;dbl&gt;, n_total_1959 &lt;dbl&gt;,
## #   n_total_1960 &lt;dbl&gt;, n_total_1961 &lt;dbl&gt;, n_total_1962 &lt;dbl&gt;,
## #   n_total_1963 &lt;dbl&gt;, n_total_1964 &lt;dbl&gt;, n_total_1965 &lt;dbl&gt;,
## #   n_total_1966 &lt;dbl&gt;, n_total_1967 &lt;dbl&gt;, n_total_1968 &lt;dbl&gt;,
## #   n_total_1969 &lt;dbl&gt;, n_total_1970 &lt;dbl&gt;, n_total_1971 &lt;dbl&gt;,
## #   n_total_1972 &lt;dbl&gt;, n_total_1973 &lt;dbl&gt;, n_total_1974 &lt;dbl&gt;,
## #   n_total_1975 &lt;dbl&gt;, n_total_1976 &lt;dbl&gt;, n_total_1977 &lt;dbl&gt;,
## #   n_total_1978 &lt;dbl&gt;, n_total_1979 &lt;dbl&gt;, n_total_1980 &lt;dbl&gt;,
## #   n_total_1981 &lt;dbl&gt;, n_total_1982 &lt;dbl&gt;, n_total_1983 &lt;dbl&gt;,
## #   n_total_1984 &lt;dbl&gt;, n_total_1985 &lt;dbl&gt;, n_total_1986 &lt;dbl&gt;,
## #   n_total_1987 &lt;dbl&gt;, n_total_1988 &lt;dbl&gt;, n_total_1989 &lt;dbl&gt;,
## #   n_total_1990 &lt;dbl&gt;, n_total_1991 &lt;dbl&gt;, n_total_1992 &lt;dbl&gt;,
## #   n_total_1993 &lt;dbl&gt;, n_total_1994 &lt;dbl&gt;, n_straight_1950 &lt;dbl&gt;,
## #   n_straight_1951 &lt;dbl&gt;, n_straight_1952 &lt;dbl&gt;, n_straight_1953 &lt;dbl&gt;,
## #   n_straight_1954 &lt;dbl&gt;, n_straight_1955 &lt;dbl&gt;, n_straight_1956 &lt;dbl&gt;,
## #   n_straight_1957 &lt;dbl&gt;, n_straight_1958 &lt;dbl&gt;, n_straight_1959 &lt;dbl&gt;,
## #   n_straight_1960 &lt;dbl&gt;, n_straight_1961 &lt;dbl&gt;, n_straight_1962 &lt;dbl&gt;,
## #   n_straight_1963 &lt;dbl&gt;, n_straight_1964 &lt;dbl&gt;, n_straight_1965 &lt;dbl&gt;,
## #   n_straight_1966 &lt;dbl&gt;, n_straight_1967 &lt;dbl&gt;, n_straight_1968 &lt;dbl&gt;,
## #   n_straight_1969 &lt;dbl&gt;, n_straight_1970 &lt;dbl&gt;, n_straight_1971 &lt;dbl&gt;,
## #   n_straight_1972 &lt;dbl&gt;, n_straight_1973 &lt;dbl&gt;, n_straight_1974 &lt;dbl&gt;,
## #   n_straight_1975 &lt;dbl&gt;, n_straight_1976 &lt;dbl&gt;, n_straight_1977 &lt;dbl&gt;,
## #   n_straight_1978 &lt;dbl&gt;, n_straight_1979 &lt;dbl&gt;, n_straight_1980 &lt;dbl&gt;,
## #   n_straight_1981 &lt;dbl&gt;, n_straight_1982 &lt;dbl&gt;, n_straight_1983 &lt;dbl&gt;,
## #   n_straight_1984 &lt;dbl&gt;, n_straight_1985 &lt;dbl&gt;, n_straight_1986 &lt;dbl&gt;,
## #   n_straight_1987 &lt;dbl&gt;, n_straight_1988 &lt;dbl&gt;, n_straight_1989 &lt;dbl&gt;,
## #   n_straight_1990 &lt;dbl&gt;, n_straight_1991 &lt;dbl&gt;, n_straight_1992 &lt;dbl&gt;,
## #   n_straight_1993 &lt;dbl&gt;, n_straight_1994 &lt;dbl&gt;
```

---

### Why Tidy?

&gt; Happy families are all alike; every unhappy family is unhappy in its own way. (Leo Tolstoy)

&lt;br&gt;

&gt; It allows Râ€™s vectorised nature to shine. (Hadley Wickham)

---

### A Tidy dataset will be much easier to transform


```r
table1$pct_straight = table1$n_straight / table1$n_total
table1
```

```
## # A tibble: 315 x 5
##    religion      yob n_straight n_total pct_straight
##    &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;        &lt;dbl&gt;
##  1 atheist      1950         26      29        0.897
##  2 buddhist     1950          6       6        1    
##  3 christian    1950         28      32        0.875
##  4 hindu        1950          0       0      NaN    
##  5 jewish       1950         21      24        0.875
##  6 muslim       1950          0       0      NaN    
##  7 unspecified  1950         71      76        0.934
##  8 atheist      1951         31      33        0.939
##  9 buddhist     1951         11      11        1    
## 10 christian    1951         23      24        0.958
## # ... with 305 more rows
```

---

### A Tidy dataset will be much easier to plot


```r
ggplot(table1, aes(x = yob, y = pct_straight, color = religion)) +
  geom_smooth(method = "loess", formula = y ~ x, se = FALSE)
```

&lt;img src="images/Table1-Plot-1.png" width="50%" /&gt;

---
class: section-slide

# Detour: The `tibble`

---

### The `tibble`: the `data.frame` re-imagined

- Prints nicer:


```r
tib1 &lt;- tibble(day = lubridate::today() + runif(1e3) * 30,
               type = sample(letters, 1e3, replace = TRUE),
               quantity = sample(seq(0, 100, 10), 1e3, replace = TRUE))
tib1
```

```
## # A tibble: 1,000 x 3
##    day        type  quantity
##    &lt;date&gt;     &lt;chr&gt;    &lt;dbl&gt;
##  1 2021-04-01 z            0
##  2 2021-03-12 d           90
##  3 2021-03-30 f            0
##  4 2021-03-20 o            0
##  5 2021-03-29 c           20
##  6 2021-04-02 f            0
##  7 2021-03-05 g            0
##  8 2021-04-02 h           60
##  9 2021-03-17 q          100
## 10 2021-03-24 h           10
## # ... with 990 more rows
```

---


```r
df1 &lt;- data.frame(day = lubridate::today() + runif(1e3) * 30,
                  type = sample(letters, 1e3, replace = TRUE),
                  quantity = sample(seq(0, 100, 10), 1e3, replace = TRUE))
df1
```

```
##             day type quantity
## 1    2021-03-29    k      100
## 2    2021-03-20    n       60
## 3    2021-03-11    n       40
## 4    2021-03-25    n       80
## 5    2021-03-06    v      100
## 6    2021-03-21    k       80
## 7    2021-04-03    x       50
## 8    2021-03-20    d       30
## 9    2021-03-05    v       90
## 10   2021-03-07    d       50
## 11   2021-03-29    g       10
## 12   2021-03-19    f       60
## 13   2021-03-05    s       20
## 14   2021-03-29    v       60
## 15   2021-03-27    j       30
## 16   2021-04-01    g       40
## 17   2021-04-02    o       40
## 18   2021-03-30    j       30
## 19   2021-04-01    y       40
## 20   2021-03-30    z       50
## 21   2021-03-18    v        0
## 22   2021-03-07    h       20
## 23   2021-03-05    q       30
## 24   2021-03-16    r       30
## 25   2021-03-19    h       50
## 26   2021-03-11    u       70
## 27   2021-03-10    q       60
## 28   2021-03-11    c      100
## 29   2021-03-18    d       70
## 30   2021-03-07    z       60
## 31   2021-03-29    q       60
## 32   2021-03-17    n       10
## 33   2021-03-19    t       70
## 34   2021-03-30    p       10
## 35   2021-03-06    o       50
## 36   2021-03-07    q       20
## 37   2021-04-02    h       40
## 38   2021-03-25    e       60
## 39   2021-03-22    p       60
## 40   2021-03-30    g       20
## 41   2021-03-22    e        0
## 42   2021-04-02    v       20
## 43   2021-03-08    n      100
## 44   2021-03-06    n       70
## 45   2021-03-31    r       30
## 46   2021-03-30    z        0
## 47   2021-03-08    y      100
## 48   2021-04-03    u       10
## 49   2021-03-14    d       50
## 50   2021-03-29    s       90
## 51   2021-03-28    v       40
## 52   2021-03-29    n       90
## 53   2021-03-11    g       50
## 54   2021-03-18    y       40
## 55   2021-03-13    z       90
## 56   2021-03-14    m       20
## 57   2021-03-11    m       70
## 58   2021-04-02    v       60
## 59   2021-03-08    k       70
## 60   2021-03-27    q       30
## 61   2021-03-31    p       40
## 62   2021-03-09    t       70
## 63   2021-04-03    s       70
## 64   2021-03-12    w       10
## 65   2021-03-27    l       40
## 66   2021-03-06    b       30
## 67   2021-03-08    o       80
## 68   2021-03-25    r      100
## 69   2021-03-27    b       90
## 70   2021-03-10    v      100
## 71   2021-03-25    c       80
## 72   2021-04-03    f       30
## 73   2021-03-23    c       50
## 74   2021-03-21    w       20
## 75   2021-03-10    y       30
## 76   2021-03-08    n       50
## 77   2021-03-11    g        0
## 78   2021-03-14    o       30
## 79   2021-03-30    e       40
## 80   2021-03-25    p       30
## 81   2021-03-19    j       30
## 82   2021-03-13    d       50
## 83   2021-03-09    e       10
## 84   2021-03-05    w       90
## 85   2021-03-07    f       10
## 86   2021-03-27    y       20
## 87   2021-03-31    c       20
## 88   2021-04-02    y      100
## 89   2021-03-29    o       40
## 90   2021-03-23    b       90
## 91   2021-03-24    t       20
## 92   2021-03-12    l       90
## 93   2021-03-22    e       40
## 94   2021-03-29    v       90
## 95   2021-03-26    q       80
## 96   2021-03-11    b       80
## 97   2021-03-11    j       60
## 98   2021-03-23    z       10
## 99   2021-03-26    f       60
## 100  2021-03-28    b       60
## 101  2021-04-01    w       80
## 102  2021-03-23    b       80
## 103  2021-03-31    y       20
## 104  2021-03-26    e       20
## 105  2021-03-08    k       20
## 106  2021-03-24    f       70
## 107  2021-03-12    u       60
## 108  2021-03-14    q       40
## 109  2021-03-19    y       10
## 110  2021-03-20    z      100
## 111  2021-03-22    t       20
## 112  2021-04-02    g       20
## 113  2021-03-19    j       10
## 114  2021-03-22    n       70
## 115  2021-03-15    o       30
## 116  2021-03-25    l       80
## 117  2021-03-17    l       60
## 118  2021-03-17    d       90
## 119  2021-03-13    o       50
## 120  2021-03-09    m       80
## 121  2021-03-30    x        0
## 122  2021-03-28    g       90
## 123  2021-03-16    r       30
## 124  2021-03-27    m       80
## 125  2021-03-07    a       40
## 126  2021-03-09    o        0
## 127  2021-03-31    c        0
## 128  2021-03-29    n        0
## 129  2021-03-05    i       30
## 130  2021-03-20    h       70
## 131  2021-03-15    k       10
## 132  2021-03-08    c       50
## 133  2021-03-13    b       50
## 134  2021-03-07    l       50
## 135  2021-03-12    k       90
## 136  2021-03-17    q       90
## 137  2021-03-22    k       40
## 138  2021-03-06    f        0
## 139  2021-03-24    w       30
## 140  2021-04-03    q       50
## 141  2021-03-13    d       10
## 142  2021-03-17    q       90
## 143  2021-03-17    o       20
## 144  2021-03-10    h       20
## 145  2021-03-05    i        0
## 146  2021-03-05    p       70
## 147  2021-03-08    w       10
## 148  2021-03-27    z       90
## 149  2021-03-16    l       60
## 150  2021-03-28    r      100
## 151  2021-03-18    m       80
## 152  2021-03-09    l       80
## 153  2021-03-09    f       50
## 154  2021-03-25    t       50
## 155  2021-03-11    e        0
## 156  2021-03-07    r       10
## 157  2021-03-30    g       70
## 158  2021-03-17    j      100
## 159  2021-03-23    e       80
## 160  2021-03-19    j       10
## 161  2021-03-13    c       40
## 162  2021-03-24    q        0
## 163  2021-03-13    q       20
## 164  2021-04-03    t        0
## 165  2021-03-19    b       80
## 166  2021-04-02    w       60
## 167  2021-03-29    w       10
## 168  2021-03-20    z       30
## 169  2021-03-12    j       20
## 170  2021-03-17    c       70
## 171  2021-03-07    s       60
## 172  2021-03-11    q       60
## 173  2021-03-27    h        0
## 174  2021-03-25    w       20
## 175  2021-03-23    s       10
## 176  2021-03-08    i       50
## 177  2021-04-01    m      100
## 178  2021-03-25    o       50
## 179  2021-03-29    c       90
## 180  2021-03-19    h       80
## 181  2021-03-31    h       70
## 182  2021-04-02    k       30
## 183  2021-03-17    p       60
## 184  2021-04-03    y       10
## 185  2021-03-12    c       40
## 186  2021-03-22    a       60
## 187  2021-03-14    j       20
## 188  2021-03-21    y       70
## 189  2021-03-13    u       50
## 190  2021-03-29    k       60
## 191  2021-03-15    c       40
## 192  2021-04-01    n       70
## 193  2021-04-03    c       10
## 194  2021-03-17    o       50
## 195  2021-03-11    r       30
## 196  2021-03-21    j       40
## 197  2021-03-14    g       10
## 198  2021-03-14    j        0
## 199  2021-03-05    e       50
## 200  2021-03-05    y      100
## 201  2021-03-27    t       90
## 202  2021-03-20    i       70
## 203  2021-03-08    z       80
## 204  2021-03-12    j       30
## 205  2021-03-30    l       10
## 206  2021-03-25    q       60
## 207  2021-03-14    g       50
## 208  2021-04-01    s        0
## 209  2021-03-13    a       30
## 210  2021-03-05    k       90
## 211  2021-03-20    h       20
## 212  2021-03-14    m       40
## 213  2021-03-15    f       50
## 214  2021-03-08    u       80
## 215  2021-03-16    d       30
## 216  2021-03-17    p       80
## 217  2021-03-24    x       80
## 218  2021-03-08    q       80
## 219  2021-03-28    r       20
## 220  2021-03-24    r       90
## 221  2021-03-17    h       20
## 222  2021-03-24    w        0
## 223  2021-03-13    z       10
## 224  2021-03-07    h       30
## 225  2021-03-19    l       90
## 226  2021-03-26    v       80
## 227  2021-03-26    p       70
## 228  2021-03-26    f        0
## 229  2021-03-29    b      100
## 230  2021-03-25    o      100
## 231  2021-03-06    f       70
## 232  2021-03-20    a       90
## 233  2021-03-17    r       60
## 234  2021-03-22    u        0
## 235  2021-03-17    m       80
## 236  2021-03-05    j       80
## 237  2021-03-10    j       60
## 238  2021-03-25    r       40
## 239  2021-03-15    h       80
## 240  2021-03-26    n      100
## 241  2021-04-03    h      100
## 242  2021-03-29    q       80
## 243  2021-03-07    o      100
## 244  2021-03-08    e       30
## 245  2021-03-11    i      100
## 246  2021-03-20    k       60
## 247  2021-03-16    f       30
## 248  2021-03-08    s       30
## 249  2021-03-20    m      100
## 250  2021-03-26    q       60
## 251  2021-03-24    r       50
## 252  2021-04-03    p       40
## 253  2021-03-21    y       30
## 254  2021-03-27    n       30
## 255  2021-03-13    a       90
## 256  2021-03-28    g      100
## 257  2021-03-27    n       50
## 258  2021-03-06    j       70
## 259  2021-04-03    f       60
## 260  2021-03-19    j       40
## 261  2021-04-03    b       80
## 262  2021-03-13    n        0
## 263  2021-03-29    l       50
## 264  2021-03-05    y        0
## 265  2021-04-01    v       10
## 266  2021-03-20    x       60
## 267  2021-03-21    b       70
## 268  2021-03-15    t        0
## 269  2021-03-27    q        0
## 270  2021-03-21    d       70
## 271  2021-03-07    q       90
## 272  2021-04-03    c        0
## 273  2021-03-14    w       50
## 274  2021-03-11    t       80
## 275  2021-03-17    a       80
## 276  2021-03-22    o       70
## 277  2021-03-18    n       80
## 278  2021-03-18    o       20
## 279  2021-03-19    n       90
## 280  2021-03-13    q       30
## 281  2021-03-06    f       30
## 282  2021-03-08    i       30
## 283  2021-03-26    q      100
## 284  2021-03-31    a       20
## 285  2021-04-03    j       90
## 286  2021-03-22    h       20
## 287  2021-03-08    g       80
## 288  2021-03-29    h       50
## 289  2021-03-29    f       10
## 290  2021-03-15    o       30
## 291  2021-03-26    x       30
## 292  2021-03-06    p       50
## 293  2021-03-25    o       30
## 294  2021-03-30    b       40
## 295  2021-03-09    x       90
## 296  2021-03-14    z      100
## 297  2021-04-01    e       30
## 298  2021-04-02    b       60
## 299  2021-03-16    b       50
## 300  2021-04-03    q       80
## 301  2021-03-07    o       80
## 302  2021-03-30    c       50
## 303  2021-03-19    p       50
## 304  2021-03-31    k       80
## 305  2021-03-10    z       10
## 306  2021-03-22    p      100
## 307  2021-04-03    u       40
## 308  2021-03-14    g       90
## 309  2021-03-17    a        0
## 310  2021-03-21    f       60
## 311  2021-03-26    n       10
## 312  2021-03-25    t       30
## 313  2021-03-20    q       30
## 314  2021-03-12    q       30
## 315  2021-03-25    c       90
## 316  2021-03-12    f        0
## 317  2021-03-24    k       30
## 318  2021-03-21    x      100
## 319  2021-03-23    b       80
## 320  2021-04-01    v       70
## 321  2021-04-01    m       30
## 322  2021-03-25    y       90
## 323  2021-04-02    n       30
## 324  2021-03-23    n       90
## 325  2021-03-18    k       90
## 326  2021-03-08    w      100
## 327  2021-03-08    y       90
## 328  2021-03-25    i       40
## 329  2021-03-21    b        0
## 330  2021-04-03    p       10
## 331  2021-03-19    s      100
## 332  2021-04-01    k        0
## 333  2021-03-09    w       50
## 334  2021-03-28    i       60
## 335  2021-03-18    v       70
## 336  2021-03-07    u      100
## 337  2021-03-11    h       20
## 338  2021-03-12    t       80
## 339  2021-04-01    m       30
## 340  2021-03-12    a        0
## 341  2021-03-29    z       70
## 342  2021-03-30    p       70
## 343  2021-03-07    l       40
## 344  2021-03-11    g       40
## 345  2021-03-18    v      100
## 346  2021-03-26    h       30
## 347  2021-03-10    b       60
## 348  2021-03-15    j        0
## 349  2021-03-14    u       80
## 350  2021-03-10    t       70
## 351  2021-03-26    r       80
## 352  2021-03-18    n       90
## 353  2021-03-30    m       70
## 354  2021-03-27    w       80
## 355  2021-03-26    q      100
## 356  2021-03-19    t       70
## 357  2021-03-20    l        0
## 358  2021-03-09    d       60
## 359  2021-03-13    o        0
## 360  2021-03-26    y       70
## 361  2021-04-03    r       90
## 362  2021-03-15    l        0
## 363  2021-03-31    z       80
## 364  2021-03-25    b       70
## 365  2021-03-27    y       40
## 366  2021-03-13    w       70
## 367  2021-03-26    m       20
## 368  2021-03-16    q       70
## 369  2021-03-26    g       10
## 370  2021-03-11    x       70
## 371  2021-03-12    b       80
## 372  2021-03-15    e       70
## 373  2021-03-09    c       20
## 374  2021-03-27    s        0
## 375  2021-03-12    e        0
## 376  2021-03-30    a      100
## 377  2021-04-01    m       30
## 378  2021-03-10    t      100
## 379  2021-04-02    h        0
## 380  2021-03-25    r       50
## 381  2021-03-23    o       90
## 382  2021-03-08    n       30
## 383  2021-04-01    e       10
## 384  2021-03-05    c       80
## 385  2021-03-23    e       50
## 386  2021-04-01    t       10
## 387  2021-03-15    e       30
## 388  2021-03-06    l       10
## 389  2021-03-15    j       60
## 390  2021-03-07    j        0
## 391  2021-03-08    u      100
## 392  2021-03-06    h        0
## 393  2021-03-18    z        0
## 394  2021-04-01    y       10
## 395  2021-03-17    l       30
## 396  2021-03-16    u       70
## 397  2021-03-21    m       70
## 398  2021-03-27    c       60
## 399  2021-03-30    y       40
## 400  2021-04-01    u       10
## 401  2021-03-13    s       80
## 402  2021-04-02    w       90
## 403  2021-03-30    g       30
## 404  2021-03-29    n       90
## 405  2021-03-23    i       30
## 406  2021-03-29    i       20
## 407  2021-03-21    g        0
## 408  2021-03-14    l       40
## 409  2021-03-11    h       90
## 410  2021-03-10    k        0
## 411  2021-04-01    o       10
## 412  2021-03-14    j      100
## 413  2021-03-22    e       70
## 414  2021-03-16    t       10
## 415  2021-03-31    q       20
## 416  2021-03-23    o       70
## 417  2021-03-17    p      100
## 418  2021-03-24    h       60
## 419  2021-04-03    s       20
## 420  2021-04-01    d       90
## 421  2021-04-03    f       40
## 422  2021-03-14    k       30
## 423  2021-03-11    n       50
## 424  2021-03-11    k       50
## 425  2021-03-31    v       60
## 426  2021-03-30    q       10
## 427  2021-03-12    n       40
## 428  2021-04-03    g       20
## 429  2021-03-14    w       90
## 430  2021-04-03    h       70
## 431  2021-03-16    x       40
## 432  2021-03-20    b       90
## 433  2021-03-08    i       30
## 434  2021-03-11    k       10
## 435  2021-03-06    n       80
## 436  2021-03-24    w       70
## 437  2021-03-20    z       70
## 438  2021-03-19    r       40
## 439  2021-04-02    n       10
## 440  2021-04-01    j        0
## 441  2021-04-01    r       40
## 442  2021-03-16    y        0
## 443  2021-04-01    c       80
## 444  2021-03-08    h       30
## 445  2021-03-22    g       60
## 446  2021-03-29    f       50
## 447  2021-03-22    w       50
## 448  2021-03-29    b       90
## 449  2021-03-18    g       30
## 450  2021-03-30    a        0
## 451  2021-03-15    u       40
## 452  2021-03-15    j       70
## 453  2021-03-19    g       90
## 454  2021-03-14    z       10
## 455  2021-03-12    u       10
## 456  2021-03-26    p       30
## 457  2021-03-05    s       90
## 458  2021-03-05    k       80
## 459  2021-03-15    m       80
## 460  2021-03-31    n       90
## 461  2021-03-24    h       60
## 462  2021-04-01    b       10
## 463  2021-03-12    v       90
## 464  2021-03-21    e       90
## 465  2021-03-25    c       40
## 466  2021-03-28    q       60
## 467  2021-03-09    j       80
## 468  2021-03-29    p       20
## 469  2021-03-27    b       50
## 470  2021-03-10    n       10
## 471  2021-03-28    q        0
## 472  2021-03-13    u       20
## 473  2021-03-22    d      100
## 474  2021-03-24    o       80
## 475  2021-03-20    i       60
## 476  2021-03-16    a       10
## 477  2021-03-14    j       90
## 478  2021-03-31    q       80
## 479  2021-03-27    s       80
## 480  2021-03-27    x       70
## 481  2021-03-20    y       50
## 482  2021-03-31    d       30
## 483  2021-03-24    k       60
## 484  2021-03-29    e       50
## 485  2021-03-23    k      100
## 486  2021-03-13    c       90
## 487  2021-04-02    t       60
## 488  2021-03-09    s       30
## 489  2021-03-24    e      100
## 490  2021-03-14    y       60
## 491  2021-03-07    v       50
## 492  2021-03-30    t      100
## 493  2021-03-24    x       60
## 494  2021-03-08    x       10
## 495  2021-04-03    g       80
## 496  2021-03-24    v       60
## 497  2021-03-29    q       30
## 498  2021-03-14    b       60
## 499  2021-03-11    p      100
## 500  2021-04-03    v       50
## 501  2021-03-18    z       30
## 502  2021-04-03    n       20
## 503  2021-03-11    s       80
## 504  2021-03-17    a       50
## 505  2021-03-19    b       40
## 506  2021-03-15    l       70
## 507  2021-04-02    k       50
## 508  2021-03-13    q        0
## 509  2021-03-21    b       10
## 510  2021-03-25    s       30
## 511  2021-03-16    q       80
## 512  2021-04-01    u      100
## 513  2021-03-30    l       40
## 514  2021-03-12    a      100
## 515  2021-03-10    g        0
## 516  2021-03-15    f       60
## 517  2021-03-26    w       30
## 518  2021-03-22    t       80
## 519  2021-03-24    u       40
## 520  2021-03-11    t       80
## 521  2021-03-07    s       40
## 522  2021-04-01    o       10
## 523  2021-03-18    o       80
## 524  2021-03-19    v       20
## 525  2021-03-27    e       30
## 526  2021-04-01    e       80
## 527  2021-04-01    t       30
## 528  2021-03-11    i      100
## 529  2021-03-28    i       70
## 530  2021-03-11    d      100
## 531  2021-03-12    i       70
## 532  2021-03-31    u       30
## 533  2021-03-14    h       60
## 534  2021-04-03    i       60
## 535  2021-03-22    f       10
## 536  2021-03-27    c       70
## 537  2021-03-05    i       80
## 538  2021-03-06    i       90
## 539  2021-03-24    p       40
## 540  2021-03-05    v       90
## 541  2021-03-15    s       60
## 542  2021-03-13    x      100
## 543  2021-03-16    r       60
## 544  2021-03-25    l       20
## 545  2021-03-16    r        0
## 546  2021-03-09    k       60
## 547  2021-04-03    u       40
## 548  2021-03-27    o      100
## 549  2021-03-13    a       60
## 550  2021-03-05    b       50
## 551  2021-03-20    b       40
## 552  2021-03-23    a      100
## 553  2021-04-02    c       60
## 554  2021-03-22    i       50
## 555  2021-03-06    g       20
## 556  2021-03-23    o       90
## 557  2021-03-11    q       60
## 558  2021-03-06    o        0
## 559  2021-03-26    n       50
## 560  2021-03-10    z       10
## 561  2021-03-26    m       50
## 562  2021-03-13    j       90
## 563  2021-03-12    s      100
## 564  2021-03-05    x      100
## 565  2021-03-25    x       80
## 566  2021-04-03    c       20
## 567  2021-03-18    c       90
## 568  2021-03-27    e       90
## 569  2021-03-27    n       40
## 570  2021-03-05    b        0
## 571  2021-03-26    f       40
## 572  2021-03-09    k       60
## 573  2021-03-21    u      100
## 574  2021-04-03    g       10
## 575  2021-03-11    k        0
## 576  2021-03-11    r       50
## 577  2021-04-03    t       60
## 578  2021-03-30    t        0
## 579  2021-03-11    g        0
## 580  2021-03-06    w       10
## 581  2021-03-13    n       50
## 582  2021-03-10    a        0
## 583  2021-03-18    p       60
## 584  2021-03-29    l       60
## 585  2021-03-07    l        0
## 586  2021-04-03    l      100
## 587  2021-03-18    c      100
## 588  2021-03-26    i       90
## 589  2021-03-23    d      100
## 590  2021-03-30    o      100
## 591  2021-03-06    x       50
## 592  2021-03-22    e       10
## 593  2021-04-03    j       90
## 594  2021-04-01    l       20
## 595  2021-03-11    y       60
## 596  2021-03-21    p      100
## 597  2021-03-16    d       40
## 598  2021-03-09    s       50
## 599  2021-03-19    q       30
## 600  2021-03-05    y       50
## 601  2021-04-01    t       70
## 602  2021-03-13    r       60
## 603  2021-03-29    p       10
## 604  2021-03-10    f       70
## 605  2021-03-24    d       20
## 606  2021-03-29    b       50
## 607  2021-03-31    t       10
## 608  2021-03-13    a       10
## 609  2021-04-03    d       30
## 610  2021-03-08    t       60
## 611  2021-03-18    m        0
## 612  2021-04-01    r       80
## 613  2021-03-21    n        0
## 614  2021-03-29    c      100
## 615  2021-03-28    f       60
## 616  2021-04-02    e       90
## 617  2021-03-14    y       90
## 618  2021-03-13    a       70
## 619  2021-04-01    k       60
## 620  2021-03-16    t       40
## 621  2021-03-26    s       60
## 622  2021-03-31    x      100
## 623  2021-03-31    d       70
## 624  2021-04-02    u       30
## 625  2021-03-18    x        0
## 626  2021-03-27    d       80
## 627  2021-03-26    s       40
## 628  2021-04-02    u       70
## 629  2021-03-08    p      100
## 630  2021-03-28    t       80
## 631  2021-03-18    r       20
## 632  2021-04-02    z       20
## 633  2021-04-02    u        0
## 634  2021-03-31    b       40
## 635  2021-03-12    n       20
## 636  2021-03-12    m       60
## 637  2021-03-09    p       20
## 638  2021-03-10    x       20
## 639  2021-04-03    k       20
## 640  2021-03-09    z       10
## 641  2021-03-10    l       40
## 642  2021-03-12    f       80
## 643  2021-03-08    w       10
## 644  2021-03-31    b       30
## 645  2021-03-22    m       40
## 646  2021-04-01    o       20
## 647  2021-03-24    h       10
## 648  2021-03-25    r       50
## 649  2021-03-13    u       30
## 650  2021-03-30    e       30
## 651  2021-03-06    n       80
## 652  2021-03-18    i       30
## 653  2021-03-07    z       90
## 654  2021-03-25    t       50
## 655  2021-03-31    v       10
## 656  2021-03-12    u       60
## 657  2021-03-08    i      100
## 658  2021-03-09    z       20
## 659  2021-03-16    s       40
## 660  2021-03-09    q       30
## 661  2021-03-20    f       60
## 662  2021-03-29    k        0
## 663  2021-03-08    m        0
## 664  2021-03-29    d      100
## 665  2021-03-19    g        0
## 666  2021-03-12    b       20
## 667  2021-03-24    m       50
## 668  2021-03-20    a       70
## 669  2021-03-19    f       60
## 670  2021-03-21    y       20
## 671  2021-03-29    b       50
## 672  2021-03-23    o       30
## 673  2021-03-09    o       70
## 674  2021-03-06    x       20
## 675  2021-03-10    x       60
## 676  2021-03-07    r      100
## 677  2021-03-14    f      100
## 678  2021-03-14    q       50
## 679  2021-03-28    r       70
## 680  2021-03-07    r       60
## 681  2021-03-30    y       10
## 682  2021-03-25    u       10
## 683  2021-03-15    a      100
## 684  2021-03-21    l       80
## 685  2021-03-20    x        0
## 686  2021-03-29    v       10
## 687  2021-03-12    f      100
## 688  2021-03-17    z       30
## 689  2021-03-09    o       70
## 690  2021-03-21    g       10
## 691  2021-03-12    k       90
## 692  2021-03-30    u       30
## 693  2021-03-14    k       60
## 694  2021-03-09    f       10
## 695  2021-03-15    p       40
## 696  2021-04-02    m       70
## 697  2021-03-30    b       60
## 698  2021-03-27    v       90
## 699  2021-03-30    i       20
## 700  2021-03-06    v       20
## 701  2021-03-16    z       70
## 702  2021-03-30    g       40
## 703  2021-03-18    w       40
## 704  2021-03-17    c       80
## 705  2021-03-12    r        0
## 706  2021-03-15    u       30
## 707  2021-03-13    x       10
## 708  2021-03-25    s       90
## 709  2021-03-23    v       10
## 710  2021-03-26    w       30
## 711  2021-03-14    r      100
## 712  2021-03-17    p       70
## 713  2021-04-03    l       60
## 714  2021-03-24    a       30
## 715  2021-03-10    q        0
## 716  2021-03-25    n        0
## 717  2021-03-19    o      100
## 718  2021-03-28    b       80
## 719  2021-03-31    t       10
## 720  2021-03-07    o      100
## 721  2021-03-10    o       90
## 722  2021-03-09    y       20
## 723  2021-03-09    l       50
## 724  2021-03-17    p       90
## 725  2021-03-23    e       20
## 726  2021-04-01    x       90
## 727  2021-03-18    w       40
## 728  2021-03-11    b       90
## 729  2021-03-16    x       50
## 730  2021-03-31    t      100
## 731  2021-03-08    s       80
## 732  2021-03-18    n       40
## 733  2021-04-02    b       90
## 734  2021-03-16    d       60
## 735  2021-03-23    f       20
## 736  2021-03-06    i       60
## 737  2021-03-16    m       30
## 738  2021-04-03    k       90
## 739  2021-03-23    k       30
## 740  2021-03-28    k       30
## 741  2021-03-23    g      100
## 742  2021-03-29    d       70
## 743  2021-03-29    g       90
## 744  2021-03-22    g       90
## 745  2021-03-09    j       50
## 746  2021-03-24    q       30
## 747  2021-03-06    g       10
## 748  2021-03-06    l       30
## 749  2021-03-12    k       60
## 750  2021-03-27    r        0
## 751  2021-03-14    w       70
## 752  2021-03-21    e       50
## 753  2021-03-20    o       20
## 754  2021-03-31    o       10
## 755  2021-03-14    f       30
## 756  2021-03-14    s       20
## 757  2021-03-29    f       60
## 758  2021-03-28    v       60
## 759  2021-03-10    k       40
## 760  2021-03-11    v       50
## 761  2021-03-06    l       30
## 762  2021-04-02    j       10
## 763  2021-03-28    f      100
## 764  2021-03-07    y        0
## 765  2021-03-23    e       50
## 766  2021-03-21    b       20
## 767  2021-03-05    y       20
## 768  2021-03-12    t       40
## 769  2021-03-22    u       90
## 770  2021-03-27    v      100
## 771  2021-03-16    e       20
## 772  2021-03-31    n        0
## 773  2021-03-08    z      100
## 774  2021-03-05    s       60
## 775  2021-03-21    c       60
## 776  2021-03-08    i       70
## 777  2021-03-24    v       50
## 778  2021-03-16    i       70
## 779  2021-03-10    b       10
## 780  2021-03-17    h       50
## 781  2021-03-19    z       60
## 782  2021-03-07    j       20
## 783  2021-04-02    i       20
## 784  2021-03-29    p       50
## 785  2021-04-03    t       50
## 786  2021-03-15    y       70
## 787  2021-03-10    z       60
## 788  2021-03-28    k       10
## 789  2021-03-16    y       30
## 790  2021-03-20    c       60
## 791  2021-03-30    p       50
## 792  2021-03-24    q       10
## 793  2021-03-13    w       30
## 794  2021-03-11    n       40
## 795  2021-03-18    h       70
## 796  2021-03-14    o       20
## 797  2021-03-08    p       90
## 798  2021-03-25    p       40
## 799  2021-03-31    z        0
## 800  2021-03-10    a      100
## 801  2021-03-13    r        0
## 802  2021-03-18    m       60
## 803  2021-03-06    k       70
## 804  2021-03-10    j       20
## 805  2021-03-23    w       50
## 806  2021-03-06    t       50
## 807  2021-03-21    a       10
## 808  2021-03-22    d        0
## 809  2021-03-11    c      100
## 810  2021-03-17    g        0
## 811  2021-03-19    b       80
## 812  2021-03-12    p        0
## 813  2021-03-30    z       60
## 814  2021-03-30    e       20
## 815  2021-04-01    t       80
## 816  2021-03-28    l       40
## 817  2021-04-01    v       40
## 818  2021-03-22    l       70
## 819  2021-03-09    x       50
## 820  2021-03-19    t       70
## 821  2021-03-26    x       30
## 822  2021-03-19    e       30
## 823  2021-03-16    j       10
## 824  2021-03-10    u      100
## 825  2021-03-26    b       60
## 826  2021-03-09    z       60
## 827  2021-03-12    q       20
## 828  2021-03-07    v       80
## 829  2021-03-18    q      100
## 830  2021-03-14    n       60
## 831  2021-04-02    v       60
## 832  2021-03-16    j        0
## 833  2021-03-16    s       50
## 834  2021-03-23    w       80
## 835  2021-03-11    y      100
## 836  2021-03-20    q       70
## 837  2021-03-26    o       20
## 838  2021-03-08    w       50
## 839  2021-03-31    s       20
## 840  2021-03-23    t       50
## 841  2021-03-14    u       50
## 842  2021-03-08    l       10
## 843  2021-03-12    t       30
## 844  2021-03-20    e       60
## 845  2021-03-12    i      100
## 846  2021-03-10    c       30
## 847  2021-03-27    g       40
## 848  2021-03-09    x       50
## 849  2021-03-21    o       20
## 850  2021-03-28    e       30
## 851  2021-04-01    l       90
## 852  2021-03-15    u       80
## 853  2021-03-19    g       30
## 854  2021-03-30    c        0
## 855  2021-03-10    p       60
## 856  2021-03-11    j       20
## 857  2021-03-08    z        0
## 858  2021-03-30    m       20
## 859  2021-03-12    w       10
## 860  2021-03-13    v        0
## 861  2021-03-17    p       60
## 862  2021-03-21    z       70
## 863  2021-03-27    a       30
## 864  2021-03-23    q       80
## 865  2021-04-02    u       50
## 866  2021-04-03    l       50
## 867  2021-03-18    g       80
## 868  2021-03-12    t       20
## 869  2021-03-28    g       70
## 870  2021-04-02    v       90
## 871  2021-03-28    c       40
## 872  2021-03-17    d      100
## 873  2021-03-19    k       20
## 874  2021-03-21    h       20
## 875  2021-03-19    m       30
## 876  2021-03-23    a       80
## 877  2021-03-19    x       80
## 878  2021-03-08    d       10
## 879  2021-03-22    y       80
## 880  2021-03-08    k       30
## 881  2021-03-24    h        0
## 882  2021-03-07    u       20
## 883  2021-03-17    z       20
## 884  2021-03-20    k       70
## 885  2021-03-30    j       30
## 886  2021-03-29    q       90
## 887  2021-03-22    o      100
## 888  2021-03-18    w      100
## 889  2021-03-31    q       70
## 890  2021-03-07    f      100
## 891  2021-03-16    j       40
## 892  2021-03-24    l       10
## 893  2021-03-30    b       30
## 894  2021-04-02    x       50
## 895  2021-03-30    p       60
## 896  2021-03-12    o       80
## 897  2021-03-26    z        0
## 898  2021-03-08    v       70
## 899  2021-03-16    a       30
## 900  2021-03-10    f       80
## 901  2021-03-28    h       40
## 902  2021-03-14    i       30
## 903  2021-03-06    o      100
## 904  2021-03-10    n       40
## 905  2021-03-21    g       60
## 906  2021-03-29    d       70
## 907  2021-03-06    p       90
## 908  2021-03-29    n       50
## 909  2021-03-15    t       60
## 910  2021-03-23    g       90
## 911  2021-03-17    k       20
## 912  2021-03-07    y       80
## 913  2021-03-20    c       30
## 914  2021-04-02    k       40
## 915  2021-03-30    m       50
## 916  2021-03-24    y      100
## 917  2021-03-21    e      100
## 918  2021-03-12    o      100
## 919  2021-03-11    m      100
## 920  2021-03-20    v       80
## 921  2021-03-30    g       60
## 922  2021-03-08    g       30
## 923  2021-03-31    e       20
## 924  2021-03-27    k      100
## 925  2021-03-16    d        0
## 926  2021-03-09    d       10
## 927  2021-03-12    v       60
## 928  2021-03-15    u       70
## 929  2021-03-26    n       60
## 930  2021-04-03    c        0
## 931  2021-03-22    a       20
## 932  2021-03-20    i       10
## 933  2021-03-14    l       40
## 934  2021-03-28    l       70
## 935  2021-03-28    m       80
## 936  2021-03-08    n       50
## 937  2021-03-26    c      100
## 938  2021-03-29    m        0
## 939  2021-04-02    d       80
## 940  2021-03-23    v       90
## 941  2021-03-08    d       50
## 942  2021-03-07    s        0
## 943  2021-03-08    s       10
## 944  2021-03-14    w       10
## 945  2021-03-06    a       20
## 946  2021-03-19    a       50
## 947  2021-03-28    c       20
## 948  2021-03-31    i       10
## 949  2021-03-26    f       30
## 950  2021-03-30    t       30
## 951  2021-03-14    m       40
## 952  2021-03-24    d      100
## 953  2021-03-31    b       60
## 954  2021-03-19    c       50
## 955  2021-03-22    o       20
## 956  2021-03-10    t       10
## 957  2021-03-15    k       90
## 958  2021-03-28    y       70
## 959  2021-03-07    o       20
## 960  2021-03-07    h       40
## 961  2021-03-15    f       20
## 962  2021-03-26    w       50
## 963  2021-03-12    b       20
## 964  2021-03-27    s      100
## 965  2021-04-01    n       80
## 966  2021-03-23    y       90
## 967  2021-03-18    x       50
## 968  2021-03-16    z       70
## 969  2021-03-30    g       60
## 970  2021-03-29    q       40
## 971  2021-03-11    m       80
## 972  2021-03-20    n       60
## 973  2021-03-28    j       90
## 974  2021-03-27    x       40
## 975  2021-03-28    t       80
## 976  2021-03-16    x       30
## 977  2021-04-01    k       60
## 978  2021-03-27    x       40
## 979  2021-03-17    q       60
## 980  2021-03-12    r       10
## 981  2021-03-25    s       90
## 982  2021-03-19    u       20
## 983  2021-03-31    z       30
## 984  2021-03-27    w      100
## 985  2021-03-18    t       10
## 986  2021-03-10    v       30
## 987  2021-03-19    j       30
## 988  2021-04-01    r      100
## 989  2021-04-01    u       40
## 990  2021-03-28    j       20
## 991  2021-03-24    v       50
## 992  2021-03-21    h       60
## 993  2021-03-29    k       60
## 994  2021-03-17    c       20
## 995  2021-03-15    o       40
## 996  2021-04-01    g       30
## 997  2021-04-03    k       20
## 998  2021-03-10    z      100
## 999  2021-03-20    f      100
## 1000 2021-03-10    n       10
```

---

- Warns you when you make mistakes (!):


```r
tib1$quanitty
```

&lt;pre style="color: red;"&gt;&lt;code&gt;## Warning: Unknown or uninitialised column: `quanitty`.
&lt;/code&gt;&lt;/pre&gt;

```
## NULL
```


```r
df1$quanitty
```

```
## NULL
```

---

- Can also create via `tribble()`:


```r
tribble(
  ~a, ~b, ~c,
  "a", 1, 2.2,
  "b", 2, 4.3,
  "c", 3, 3.4
)
```

```
## # A tibble: 3 x 3
##   a         b     c
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         1   2.2
## 2 b         2   4.3
## 3 c         3   3.4
```

---

- Can build on top variables during creation:


```r
tibble(x = 1:5, y = x^2)
```

```
## # A tibble: 5 x 2
##       x     y
##   &lt;int&gt; &lt;dbl&gt;
## 1     1     1
## 2     2     4
## 3     3     9
## 4     4    16
## 5     5    25
```


```r
data.frame(x = 1:5, y = x^2)
```

&lt;pre style="color: red;"&gt;&lt;code&gt;## Error in data.frame(x = 1:5, y = x^2): object 'x' not found
&lt;/code&gt;&lt;/pre&gt;

---

- Will never turn your strings into factors, will never change your column names:


```r
tib1 &lt;- readr::read_csv("../data/bad_args_test.csv", col_types = cols())
colnames(tib1)
```

```
## [1] "col1" "col2" "col3"
```

```r
tib1$col3
```

```
## [1] "a" "b" "c" "d"
```


```r
df1 &lt;- read.csv("../data/bad_args_test.csv")
colnames(df1)
```

```
## [1] "Ã¯..col1" "col2"    "col3"
```

```r
df1$col3
```

```
## [1] "a" "b" "c" "d"
```

---

Though one ought to remember a `tibble` is still a `data.frame`:


```r
class(tib1)
```

```
## [1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame"
```


```r
class(df1)
```

```
## [1] "data.frame"
```

---
class: section-slide

# End of Detour

---

## Consistency - Example: `stringr`

&gt; a cohesive set of functions designed to make working with strings as easy as possible.


```r
strings_vec &lt;- c("I'm feeling fine", "I'm perfectly OK",
                 "Nothing is wrong!")
str_length(strings_vec)
```

```
## [1] 16 16 17
```

```r
str_c(strings_vec, collapse = ", ")
```

```
## [1] "I'm feeling fine, I'm perfectly OK, Nothing is wrong!"
```

```r
str_sub(strings_vec, 1, 3)
```

```
## [1] "I'm" "I'm" "Not"
```

---


```r
str_detect(strings_vec, "I'm")
```

```
## [1]  TRUE  TRUE FALSE
```

```r
str_replace(strings_vec, "I'm", "You're")
```

```
## [1] "You're feeling fine" "You're perfectly OK" "Nothing is wrong!"
```

```r
str_split("Do you know regex?", " ")
```

```
## [[1]]
## [1] "Do"     "you"    "know"   "regex?"
```

```r
str_extract(strings_vec, "[aeiou]")
```

```
## [1] "e" "e" "o"
```

```r
str_count(strings_vec, "[A-Z]")
```

```
## [1] 1 3 1
```

---

## The Pipe

Remember you?


```r
mean_bi &lt;- mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == "bisexual"], na.rm = TRUE)
mean_gay &lt;- mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == "gay"], na.rm = TRUE)
mean_straight &lt;- mean(okcupid$income[okcupid$sex == "f" &amp; okcupid$age &gt; 30 &amp; okcupid$orientation == "straight"], na.rm = TRUE)

data.frame(orientation = c("bisexual", "gay", "straight"),
           income_mean = c(mean_bi, mean_gay, mean_straight))
```

```
##   orientation income_mean
## 1    bisexual   133421.05
## 2         gay    86489.36
## 3    straight    85219.74
```

---

Doesn't this make much more sense?


```r
okcupid %&gt;%
  filter(sex == "f", age &gt; 30) %&gt;%
  group_by(orientation) %&gt;%
  summarize(income_mean = mean(income, na.rm = TRUE))
```

```
## # A tibble: 3 x 2
##   orientation income_mean
##   &lt;chr&gt;             &lt;dbl&gt;
## 1 bisexual        133421.
## 2 gay              86489.
## 3 straight         85220.
```

- Read as:
  - Take the OKCupid data,
  - Filter only women above the age of 30,
  - And for each group of sexual orientation,
  - Give me the average income

---

- Make verbs, not nouns
- Can always access the dataset last stage with "`.`":

```r
okcupid %&gt;%
  filter(str_count(essay0) &gt; median(str_count(.$essay0), na.rm = T))
```
- Operates not just on data frames or tibbles:

```r
strings_vec %&gt;% str_to_title()
```

```
## [1] "I'm Feeling Fine"  "I'm Perfectly Ok"  "Nothing Is Wrong!"
```
- No intermediate objects
- Don't strive to make the longest possible pipe (though it is a fun experiment)
- Tools exist for debugging

---

And, if you want to throw in the n, the median:


```r
okcupid %&gt;%
  filter(sex == "f", age &gt; 30) %&gt;%
  group_by(orientation) %&gt;%
  summarize(income_mean = mean(income, na.rm = TRUE),
            income_median = median(income, na.rm = TRUE),
            n = n())
```

```
## # A tibble: 3 x 4
##   orientation income_mean income_median     n
##   &lt;chr&gt;             &lt;dbl&gt;         &lt;dbl&gt; &lt;int&gt;
## 1 bisexual        133421.         50000   652
## 2 gay              86489.         40000   664
## 3 straight         85220.         60000 10436
```

---

And if you want this for the age as well:


```r
okcupid %&gt;%
  filter(sex == "f", age &gt; 30) %&gt;%
  group_by(orientation) %&gt;%
  summarize(across(c(income, age),
            list(mean = mean, median = median), na.rm = TRUE))
```

```
## # A tibble: 3 x 5
##   orientation income_mean income_median age_mean age_median
##   &lt;chr&gt;             &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1 bisexual        133421.         50000     37.8         36
## 2 gay              86489.         40000     40.4         38
## 3 straight         85220.         60000     40.7         38
```

Now *this* is a language for Data Science.

But we're getting ahead of ourselves.

---

## `ggplot2`

&lt;img src="images/ave_mariah_ggridges.png" style="width: 80%" /&gt;

.font80percent[
[Ave Mariah / Giora Simchoni](http://giorasimchoni.com/2017/12/10/2017-12-10-ave-mariah/)
]
---

## `ggplot2`

&lt;img src="images/soviet_space_dogs.png" style="width: 50%" /&gt;

.font80percent[
[Soviet Space Dogs / David Smale](https://davidsmale.netlify.com/portfolio/soviet-space-dogs-part-2/)
]
---

## `ggplot2`

&lt;img src="images/tennisBig4.gif" style="width: 70%" /&gt;

.font80percent[
[Federer, Nadal, Djokovic and Murray, Love. / Giora Simchoni](http://giorasimchoni.com/2017/05/01/2017-05-01-federer-nadal-djokovic-and-murray-love/)
]
---

## `ggplot2`

&lt;img src="images/washington_heat.png" style="width: 40%" /&gt;

.font80percent[
[NYT-style urban heat island maps / Katie Jolly](https://www.katiejolly.io/blog/2019-08-28/nyt-urban-heat)
]
---

## `ggplot2`

&lt;img src="images/marriage_by_state.png" style="width: 90%" /&gt;

.font80percent[
[A map of marriage rates, state by state / Unkown](https://www.r-graph-gallery.com/328-hexbin-map-of-the-usa.html)
]
---

## `ggplot2`

&lt;img src="images/calendar_graph.png" style="width: 70%" /&gt;

.font80percent[
[Calendar-based graphics for visualizing peopleâ€™s daily schedules / Earo Wang](https://pdf.earo.me/calendar-vis.pdf)
]
---

## The Community

.pull-left[
- 100% Open Source on Github
- Cheatsheet for everything
- Documentation for humans, Packages websites, Webinars, Free Books (start with [R4DS](https://r4ds.had.co.nz/))
- [Rstudio Community forum](https://community.rstudio.com/)
- [RLadies](https://rladies.org/) worldwide branches .font80percent[(who will pick up the ðŸ¥Š and create RLadies TLV?)]
- Very strong on Twitter [#rstats](https://twitter.com/search?q=%23rstats)
]

.pull-right[
&lt;a href="https://rstudio.com/resources/cheatsheets/"&gt;&lt;img src="images/stringr_cheatsheet.png" style="width: 100%" /&gt;&lt;/a&gt;
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="../libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
